<ng2-toasty></ng2-toasty>

<div class="row">
  <div class="col-sm-12 filter-bar">
    <nav class="navbar navbar-light bg-faded m-b-30 p-10">
      {{ !empresa.id ? 'Cadastro de Empresa' : ('Cadastro da Empresa: ' + empresa.nomeFantasia) }}
      <div class="nav-item nav-grid">
        <span class="m-r-15">Ações: </span>

        <button type="button" class="btn btn-sm m-r-10" data-toggle="tooltip" data-placement="top"
          title="Lista de Empresas" [routerLink]="['/empresa/lista']">
          <i class="icofont icofont-listing-box icofont-2x"></i>
        </button>
        <button type="button" class="btn btn-sm" data-toggle="tooltip" data-placement="top" title="Salvar"
          (click)="salvar()" [disabled]="formulario.invalid">
          <i class="icofont icofont-save icofont-2x"></i>
        </button>
      </div>
    </nav>
  </div>
</div>

<div class="row">
  <div class="col-sm-12">
    <app-card>
      <app-loader [observable]="observable"></app-loader>
      <form autocomplete="off" [formGroup]="formulario">
        <div class="form-group row">
          <div class="col-sm-4">
            <label class="col-form-label" [ngClass]="{'form-control-danger' : !isValid('cnpj')}">Cnpj</label>
            <input type="text" class="form-control form-control-round"
              [ngClass]="{'form-control-danger' : !isValid('cnpj')}" #cnpj [(ngModel)]="empresa.cnpj"
              formControlName="cnpj" [textMask]="{mask: cnpjMask}">
          </div>
          <div class="col-sm-4">
            <label class="col-form-label" [ngClass]="{'form-control-danger' : !isValid('nomeFantasia')}">Nome
              Fantasia</label>
            <input type="text" class="form-control form-control-round"
              [ngClass]="{'form-control-danger' : !isValid('nomeFantasia')}" #nomeFantasia
              [(ngModel)]="empresa.nomeFantasia" formControlName="nomeFantasia">
          </div>
          <div class="col-sm-2">
            <label class="col-form-label" [ngClass]="{'form-control-danger' : !isValid('ativo')}">Ativo</label><br>
            <ui-switch class="js-small" [ngClass]="{'form-control-danger' : !isValid('ativo')}" color="#3498DB"
              size="small" [(ngModel)]="empresa.ativo" formControlName="ativo"></ui-switch>
          </div>
        </div>
        <div class="form-group row">
          <div class="col-sm-12">
            <label class="col-form-label" [ngClass]="{'form-control-danger' : !isValid('razaoSocial')}">
              Razão Social
            </label>
            <input type="text" class="form-control form-control-round"
              [ngClass]="{'form-control-danger' : !isValid('razaoSocial')}" #razaoSocial
              [(ngModel)]="empresa.razaoSocial" formControlName="razaoSocial">
          </div>
          <div class="col-sm-2">
            <label class="col-form-label" [ngClass]="{'form-control-danger' : !isValid('cep')}">CEP</label>
            <input type="text" class="form-control form-control-round"
              [ngClass]="{'form-control-danger' : !isValid('cep')}" #cep [(ngModel)]="empresa.cep" formControlName="cep"
              [textMask]="{mask: cepMask}" (keyup)="validaCep($event)">
          </div>
          <div class="col-sm-10">
            <label class="col-form-label">Rua</label>
            <input type="text" class="form-control form-control-round" #rua [(ngModel)]="empresa.rua"
              formControlName="rua">
          </div>

          <div class="col-sm-2">
            <label class="col-form-label" [ngClass]="{'form-control-danger' : !isValid('numero')}">Número</label>
            <input type="number" class="form-control form-control-round"
              [ngClass]="{'form-control-danger' : !isValid('numero')}" #numero [(ngModel)]="empresa.numero"
              formControlName="numero">
          </div>
          <div class="col-sm-4">
            <label class="col-form-label">Bairro</label>
            <input type="text" class="form-control form-control-round" #bairro [(ngModel)]="empresa.bairro"
              formControlName="bairro">
          </div>
          <div class="col-sm-4">
            <label class="col-form-label">Cidade</label>
            <input type="text" class="form-control form-control-round" #cidade [(ngModel)]="empresa.cidade"
              formControlName="cidade">
          </div>
          <div class="col-sm-2">
            <label class="col-form-label">Estado</label>
            <input type="text" class="form-control form-control-round" #estado [(ngModel)]="empresa.estado"
              formControlName="estado">
          </div>
          <div class="col-sm-12">
            <label class="col-form-label"
              [ngClass]="{'form-control-danger' : !isValid('complemento')}">Complemento</label>
            <input type="text" class="form-control form-control-round"
              [ngClass]="{'form-control-danger' : !isValid('complemento')}" #complemento
              [(ngModel)]="empresa.complemento" formControlName="complemento">
          </div>
          <div class="col-sm-8">
            <label class="col-form-label" [ngClass]="{'form-control-danger' : !isValid('email')}">E-mail</label>
            <input type="email" class="form-control form-control-round"
              [ngClass]="{'form-control-danger' : !isValid('email')}" #email [(ngModel)]="empresa.email"
              formControlName="email">
          </div>
          <div class="col-sm-4">
            <label class="col-form-label" [ngClass]="{'form-control-danger' : !isValid('telefone')}">Telefone</label>
            <input type="text" class="form-control form-control-round"
              [ngClass]="{'form-control-danger' : !isValid('telefone')}" #telefone [(ngModel)]="empresa.telefone"
              formControlName="telefone" [textMask]="{mask: telefoneMask}">
          </div>
        </div>
      </form>
    </app-card>
  </div>
</div>