<ng2-toasty></ng2-toasty>

<div class="row">
  <div class="col-sm-12">
    <app-card>
      <div class="row">
        <div class="col-sm-12 filter-bar">
          <nav class="navbar navbar-light bg-faded m-b-30 p-10">
            {{ !construtora.id ? 'Cadastro de Construtora' : ('Cadastro da Construtora: ' + construtora.nomeFantasia) }}
            <div class="nav-item nav-grid">
              <span class="m-r-15">Ações: </span>

              <button type="button" class="btn btn-sm m-r-10" data-toggle="tooltip" data-placement="top"
                title="Lista de Construtoras" [routerLink]="['/construtora/lista']">
                <i class="fa fa-list"></i>
              </button>
              <button type="button" class="btn btn-sm" data-toggle="tooltip" data-placement="top" title="Salvar"
                (click)="salvar()" [disabled]="formulario.invalid">
                <i class="fa fa-save"></i>
              </button>
            </div>
          </nav>
        </div>
      </div>

      <form autocomplete="off" [formGroup]="formulario">
        <div class="form-group row">
          <div class="col-sm-4">
            <label class="col-form-label" [ngClass]="{'form-control-danger' : !isValid('empresa')}">Empresa</label>
            <ng-select [ngClass]="'ng-select'" [options]="listaEmpresas" [(ngModel)]="empresaId"
              formControlName="empresa">
            </ng-select>
          </div>
          <div class="col-sm-2">
            <label class="col-form-label" [ngClass]="{'form-control-danger' : !isValid('cnpj')}">CNPJ</label>
            <input type="text" class="form-control" #cnpj [(ngModel)]="construtora.cnpj" formControlName="cnpj"
              [textMask]="{mask: cnpjMask}">
          </div>
          <div class="col-sm-4">
            <label class="col-form-label" [ngClass]="{'form-control-danger' : !isValid('nomeFantasia')}">Nome
              Fantasia</label>
            <input type="text" class="form-control" #nomeFantasia [(ngModel)]="construtora.nomeFantasia"
              formControlName="nomeFantasia">
          </div>
          <div class="col-sm-2">
            <br><br>
            <div class="custom-control custom-switch">
              <input type="checkbox" class="custom-control-input" id="ativo"
                [ngClass]="{'form-control-danger' : !isValid('ativo')}" [(ngModel)]="construtora.ativo"
                formControlName="ativo">
              <label class="custom-control-label" for="ativo"
                [ngClass]="{'form-control-danger' : !isValid('ativo')}">Ativo</label>
            </div>
          </div>
          <div class="col-sm-12">
            <label class="col-form-label" [ngClass]="{'form-control-danger' : !isValid('razaoSocial')}">
              Razão Social
            </label>
            <input type="text" class="form-control" #razaoSocial [(ngModel)]="construtora.razaoSocial"
              formControlName="razaoSocial">
          </div>
          <div class="col-sm-2">
            <label class="col-form-label" [ngClass]="{'form-control-danger' : !isValid('cep')}">CEP</label>
            <input type="text" class="form-control" #cep [(ngModel)]="construtora.cep" formControlName="cep"
              [textMask]="{mask: cepMask}" (keyup)="validaCep($event)">
          </div>
          <div class="col-sm-10">
            <label class="col-form-label">Rua</label>
            <input type="text" class="form-control" #rua [(ngModel)]="construtora.rua" formControlName="rua">
          </div>
          <div class="col-sm-2">
            <label class="col-form-label" [ngClass]="{'form-control-danger' : !isValid('numero')}">Número</label>
            <input type="number" class="form-control" #numero [(ngModel)]="construtora.numero" formControlName="numero">
          </div>
          <div class="col-sm-4">
            <label class="col-form-label">Bairro</label>
            <input type="text" class="form-control" #bairro [(ngModel)]="construtora.bairro" formControlName="bairro">
          </div>
          <div class="col-sm-4">
            <label class="col-form-label">Cidade</label>
            <input type="text" class="form-control" #cidade [(ngModel)]="construtora.cidade" formControlName="cidade">
          </div>
          <div class="col-sm-2">
            <label class="col-form-label">Estado</label>
            <input type="text" class="form-control" #estado [(ngModel)]="construtora.estado" formControlName="estado">
          </div>
          <div class="col-sm-12">
            <label class="col-form-label"
              [ngClass]="{'form-control-danger' : !isValid('complemento')}">Complemento</label>
            <input type="text" class="form-control" #complemento [(ngModel)]="construtora.complemento"
              formControlName="complemento">
          </div>
          <div class="col-sm-8">
            <label class="col-form-label" [ngClass]="{'form-control-danger' : !isValid('email')}">E-mail</label>
            <input type="email" class="form-control" #email [(ngModel)]="construtora.email" formControlName="email">
          </div>
          <div class="col-sm-4">
            <label class="col-form-label" [ngClass]="{'form-control-danger' : !isValid('telefone')}">Telefone</label>
            <input type="text" class="form-control" #telefone [(ngModel)]="construtora.telefone"
              formControlName="telefone" [textMask]="{mask: telefoneMask}">
          </div>
        </div>
      </form>
    </app-card>
  </div>
</div>