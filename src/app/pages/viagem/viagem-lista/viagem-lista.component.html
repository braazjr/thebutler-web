<div class="page-body">
  <div class="row">
    <div class="col-sm-12">
      <app-card>
        <app-loader [observable]="observable"></app-loader>
        <div class="row">
          <div class="col-sm-12 filter-bar">
            <nav class="navbar navbar-light bg-faded m-b-30 p-10">
              Lista de Viagens
            </nav>
          </div>
        </div>
      
        <!-- filtros -->
        <div class="row">
          <div class="col-sm-12">
            <!-- <div class="form-group row">
              <div class="col-sm-3">
                <label class="col-form-label">Condominio</label>
                <ng-select [ngClass]="'ng-select'" [options]="listaCondominios" [(ngModel)]="listaData.idCondominio">
                </ng-select>
              </div>
              <div class="col-sm-3">
                <label class="col-form-label">Bloco</label>
                <ng-select [ngClass]="'ng-select'" [options]="listaBlocos" [(ngModel)]="listaData.idBloco">
                </ng-select>
              </div>
              <div class="col-sm-6">
                <label class="col-form-label">Nome</label>
                <input type="text" class="form-control form-control-round" [(ngModel)]="listaData.nome">
              </div>
            </div>
            <div class="form-group row">
              <div class="col-sm-3">
                <label class="col-form-label">Documento</label>
                <input type="text" class="form-control form-control-round" [(ngModel)]="listaData.documento">
              </div>
              <div class="col-sm-3">
                <label class="col-form-label">Numero Apart.</label>
                <input type="number" class="form-control form-control-round" [(ngModel)]="listaData.numeroApartamento">
              </div>
              <div class="col-sm-3">
                <label class="col-form-label">Ativo</label>
                <ng-select [ngClass]="'ng-select'" [options]="ativoOpcoes" [(ngModel)]="listaData.ativo">
                </ng-select>
              </div>
              <div class="col-sm-2">
                <button class="btn btn-primary btn-round" style="margin-top: 30px" (click)="getMoradores()">
                  Pesquisar
                </button>
                <button class="btn btn-warning btn-round" style="margin-top: 30px" (click)="limparPesquisa()">
                  Limpar
                </button>
              </div>
            </div> -->
          </div>
        </div>
        <br>
        <ngx-datatable #table class='data-table' [columnMode]="'flex'" [headerHeight]="50" [footerHeight]="50"
          [rowHeight]="'auto'" [externalPaging]="true" [rows]="listaViagens"
          [count]="listaData ? listaData.totalElements : 0" [offset]="listaData ? listaData.page : 0"
          [limit]="listaData ? listaData.size : 10" (page)='setPage($event)' (sort)="onSort($event)">

          <ngx-datatable-row-detail [rowHeight]="'auto'" #myDetailRow>
            <ng-template let-rowChild="row" let-expanded="expanded" ngx-datatable-row-detail-template>
              <!-- morador table -->
              <ngx-datatable #table class='data-table' [columnMode]="'flex'" [headerHeight]="50" [footerHeight]="50"
                [rowHeight]="'auto'" [rows]="rowChild.moradores">

                <ngx-datatable-column prop="id" name="ID" [flexGrow]="1">
                  <ng-template let-row="row" ngx-datatable-cell-template><strong>{{ row.id }}</strong></ng-template>
                </ngx-datatable-column>
                <ngx-datatable-column prop="horario" name="Horário" [flexGrow]="1">
                  <ng-template let-row="row" ngx-datatable-cell-template>{{ row.horario }}</ng-template>
                </ngx-datatable-column>
                <ngx-datatable-column prop="morador.nome" name="Morador" [flexGrow]="3">
                  <ng-template let-row="row" ngx-datatable-cell-template>{{ row.morador.nome }}</ng-template>
                </ngx-datatable-column>

              </ngx-datatable>
              <!-- morador table -->
            </ng-template>
          </ngx-datatable-row-detail>

          <ngx-datatable-column [flexGrow]="1" [sortable]="false">
            <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
              <a href="javascript:void(0)" [class.datatable-icon-right]="!expanded"
                [class.datatable-icon-down]="expanded" title="Expand/Collapse Row" (click)="toggleExpandRow(row)">
              </a>
            </ng-template>
          </ngx-datatable-column>

          <ngx-datatable-column prop="id" name="ID" [flexGrow]="1">
            <ng-template let-row="row" ngx-datatable-cell-template><strong>{{ row.id }}</strong></ng-template>
          </ngx-datatable-column>
          <ngx-datatable-column prop="dataHoraInicio" name="Data/Hora Início" [flexGrow]="2">
            <ng-template let-row="row" ngx-datatable-cell-template>{{ row.dataHoraInicio | date:'dd/MM/yyyy HH:mm' }}
            </ng-template>
          </ngx-datatable-column>
          <ngx-datatable-column prop="dataHoraFim" name="Data/Hora Fim" [flexGrow]="2">
            <ng-template let-row="row" ngx-datatable-cell-template>{{ row.dataHoraFim }}</ng-template>
          </ngx-datatable-column>
          <ngx-datatable-column prop="motorista.login" name="Motorista" [flexGrow]="2">
            <ng-template let-row="row" ngx-datatable-cell-template>{{ row.motorista.login }}</ng-template>
          </ngx-datatable-column>
          <ngx-datatable-column prop="rota.nome" name="Rota" [flexGrow]="3">
            <ng-template let-row="row" ngx-datatable-cell-template>{{ row.rota.nome }}</ng-template>
          </ngx-datatable-column>
        </ngx-datatable>
      </app-card>
    </div>
  </div>
</div>